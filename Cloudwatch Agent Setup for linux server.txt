1- Create Role
Role - Aws service - EC2 - AmazonSSMFullAccess
2- Assign Role to instance- ( We need to install and configure web server )
3- Open Systemmanager (SSM)
4- Run command
5- Search "AWS-ConfigureAWSPackage" and select it
6- Document - default
7- Action - install
8- Name of Package name
AmazonCloudWatchAgent
9- version - latest 
10- select instance
Choose instance manually and click on run
11- Open parameter store in the system manager
12- create parameter store
13- parameter name
14- Tier - standard
15- Type - string
16- Data type - text
17 - Value- paste code in the box (Copy the agent configuration file 
that we want to use to the server where we are going to run the agent)
======================================
{
    "logs": {
      "logs_collected": {
        "files": {
          "collect_list": [
            {
              "log_group_name": "HttpAccessLog",
              "file_path": "/var/log/httpd/access_log",
              "log_stream_name": "{instance_id}",
              "timestamp_format": "%b %d %H:%M:%S"
            },
            {
              "log_group_name": "HttpErrorLog",
              "file_path": "/var/log/httpd/error_log",
              "log_stream_name": "{instance_id}",
              "timestamp_format": "%b %d %H:%M:%S"
            }
          ]
        }
      }
    },
    "metrics": {
      "metrics_collected": {
        "cpu": {
          "measurement": [
            "cpu_usage_idle",
            "cpu_usage_iowait",
            "cpu_usage_user",
            "cpu_usage_system"
          ],
          "metrics_collection_interval": 10,
          "totalcpu": false
        },
        "disk": {
          "measurement": [
            "used_percent",
            "inodes_free"
          ],
          "metrics_collection_interval": 10,
          "resources": [
            "*"
          ]
        },
        "diskio": {
          "measurement": [
            "io_time"
          ],
          "metrics_collection_interval": 10,
          "resources": [
            "*"
          ]
        },
        "mem": {
          "measurement": [
            "mem_used_percent"
          ],
          "metrics_collection_interval": 10
        },
        "swap": {
          "measurement": [
            "swap_used_percent"
          ],
          "metrics_collection_interval": 10
        }
      }
    }
  }

======================================
18- create parameter store

19- Install Cloudwatch Manage Agent
open the system manager 
20- run command
21- Search "AmazonCloudWatch-ManageAgent" and select
22- Document version - default
23- Action - configure
24- Mode - EC2
25 - Optional configuration source - ssm
26 - Optional Configuration Location - Parameter store name
27- optional restart - yes
28- choose the instance manually
29- Click on Run
30-
1-  open cloudwatch - click on all metrics and check resource utilization
2- open cloudwatch - click on log group and check the log

# optional
If required than create metric of Logs and crete a alarm-
1- Select the log group
2- Action - create metric filter
3- spacify the filter patterrn-
[ ip,id,user,timestam,request,status_code=404,size]
4- Test pattern - select instance Id - Next - specify filter name ( any name ) - metric name space ( any name ) - Metric Name ( Any Name ) - Metric value 1 - And leave default other parameter
5- Click on all dimension box
6- Click on next and create Filter Metric
7- # Create Alarm 
Click on metric filter and create alarm
8- configure alarm than next - create or select sns topic - next - spacify alarm name - next - Create Alarm

# optional
1- Login the server - ec2-user
2- sudo su -
3- cd /var/log/httpd
4- ls
5- "cat access_log" and check the details

